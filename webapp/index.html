<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Asistan</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- ==================== CÃœZDAN TAB ==================== -->
        <div class="tab-content active" id="tab-cuzdan">
            <div class="container">
                <!-- Bakiye KartÄ± -->
                <div class="balance-card" onclick="showBakiyeModal()">
                    <div class="balance-label">Bakiye <span class="edit-hint">âœï¸</span></div>
                    <div class="balance-amount" id="bakiye">0.00 â‚º</div>
                    <div class="balance-stats">
                        <div class="stat">
                            <span class="stat-label">Bu Ay Gelir</span>
                            <span class="stat-value green" id="aylik-gelir">+0 â‚º</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Bu Ay Gider</span>
                            <span class="stat-value red" id="aylik-gider">-0 â‚º</span>
                        </div>
                    </div>
                </div>

                <!-- HÄ±zlÄ± Butonlar -->
                <div class="quick-actions">
                    <button class="action-btn green" onclick="showGelirModal()">
                        <span class="action-icon">+</span>
                        <span class="action-text">Gelir</span>
                    </button>
                    <button class="action-btn red" onclick="showGiderModal()">
                        <span class="action-icon">âˆ’</span>
                        <span class="action-text">Gider</span>
                    </button>
                </div>

                <!-- AI Analiz Butonu -->
                <button class="ai-analyze-btn" onclick="sendToAI()">
                    <span class="ai-icon">ğŸ¤–</span>
                    <span class="ai-text">AI ile Analiz Et</span>
                </button>

                <!-- Kategori GrafiÄŸi -->
                <div class="section">
                    <h3>Bu Ay Harcamalar</h3>
                    <div class="chart-container" id="chart">
                        <!-- JS ile doldurulacak -->
                    </div>
                </div>

                <!-- Son Ä°ÅŸlemler -->
                <div class="section">
                    <h3>Son Ä°ÅŸlemler</h3>
                    <div class="transactions" id="transactions">
                        <!-- JS ile doldurulacak -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== NOTLAR TAB ==================== -->
        <div class="tab-content" id="tab-notlar">
            <div class="container">
                <!-- Not Ekle Butonu -->
                <button class="add-note-btn" onclick="showNotEkleModal()">
                    <span>â•</span>
                    <span>Yeni Not Ekle</span>
                </button>

                <!-- Notlar Listesi -->
                <div class="section">
                    <h3>ğŸ“ NotlarÄ±m</h3>
                    <div class="notes-list" id="notes-list">
                        <!-- JS ile doldurulacak -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== KONUM TAB ==================== -->
        <div class="tab-content" id="tab-konum">
            <div class="container">
                <!-- Konum KartÄ± -->
                <div class="location-card" id="location-card">
                    <div class="location-icon">ğŸ“</div>
                    <div class="location-text" id="location-text">Konum alÄ±nmadÄ±</div>
                    <button class="location-btn" onclick="getLocation()">
                        <span>ğŸ“</span>
                        <span>Konumumu Al</span>
                    </button>
                </div>

                <!-- Konum Bilgileri -->
                <div class="location-info" id="location-info" style="display: none;">
                    <!-- Hava Durumu -->
                    <div class="info-card" id="weather-card">
                        <div class="info-header">
                            <span class="info-icon">ğŸŒ¤ï¸</span>
                            <span class="info-title">Hava Durumu</span>
                        </div>
                        <div class="info-content" id="weather-content">
                            YÃ¼kleniyor...
                        </div>
                    </div>

                    <!-- Namaz Vakitleri -->
                    <div class="info-card" id="prayer-card">
                        <div class="info-header">
                            <span class="info-icon">ğŸ•Œ</span>
                            <span class="info-title">Namaz Vakitleri</span>
                        </div>
                        <div class="info-content" id="prayer-content">
                            YÃ¼kleniyor...
                        </div>
                    </div>

                    <!-- YakÄ±n Yerler -->
                    <div class="section">
                        <h3>ğŸ“ YakÄ±n Yerler</h3>
                        <div class="nearby-categories">
                            <button class="nearby-btn" onclick="findNearby('pharmacy')">ğŸ’Š Eczane</button>
                            <button class="nearby-btn" onclick="findNearby('fuel')">â›½ Benzinlik</button>
                            <button class="nearby-btn" onclick="findNearby('hospital')">ğŸ¥ Hastane</button>
                            <button class="nearby-btn" onclick="findNearby('mosque')">ğŸ•Œ Cami</button>
                            <button class="nearby-btn" onclick="findNearby('atm')">ğŸ§ ATM</button>
                            <button class="nearby-btn" onclick="findNearby('supermarket')">ğŸ›’ Market</button>
                            <button class="nearby-btn" onclick="findNearby('restaurant')">ğŸ½ï¸ Restoran</button>
                            <button class="nearby-btn" onclick="findNearby('cafe')">â˜• Kafe</button>
                            <button class="nearby-btn" onclick="findNearby('parking')">ğŸ…¿ï¸ Otopark</button>
                            <button class="nearby-btn" onclick="findNearby('police')">ğŸ‘® Polis</button>
                        </div>
                        <div class="nearby-results" id="nearby-results">
                            <!-- JS ile doldurulacak -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== ALT TAB BAR ==================== -->
        <div class="tab-bar">
            <button class="tab-btn active" onclick="switchTab('cuzdan')">
                <span class="tab-icon">ğŸ’°</span>
                <span class="tab-text">CÃ¼zdan</span>
            </button>
            <button class="tab-btn" onclick="switchTab('notlar')">
                <span class="tab-icon">ğŸ“</span>
                <span class="tab-text">Notlar</span>
            </button>
            <button class="tab-btn" onclick="switchTab('konum')">
                <span class="tab-icon">ğŸ“</span>
                <span class="tab-text">Konum</span>
            </button>
        </div>
    </div>

    <!-- ==================== MODALS ==================== -->

    <!-- Gelir Modal -->
    <div class="modal" id="gelir-modal">
        <div class="modal-content">
            <h3>â• Gelir Ekle</h3>
            <input type="number" id="gelir-tutar" placeholder="Tutar (â‚º)" inputmode="decimal">
            <div class="kategori-grid" id="gelir-kategoriler">
                <button class="kat-btn" data-kat="maas">ğŸ’¼ MaaÅŸ</button>
                <button class="kat-btn" data-kat="ek_gelir">ğŸ’µ Ek Gelir</button>
                <button class="kat-btn" data-kat="yatirim">ğŸ“ˆ YatÄ±rÄ±m</button>
                <button class="kat-btn" data-kat="hediye">ğŸ Hediye</button>
                <button class="kat-btn" data-kat="iade">ğŸ”„ Ä°ade</button>
                <button class="kat-btn" data-kat="diger_gelir">ğŸ’° DiÄŸer</button>
            </div>
            <input type="text" id="gelir-aciklama" placeholder="AÃ§Ä±klama (opsiyonel)">
            <div class="modal-buttons">
                <button class="btn cancel" onclick="closeModal('gelir-modal')">Ä°ptal</button>
                <button class="btn confirm" onclick="gelirEkle()">Ekle</button>
            </div>
        </div>
    </div>

    <!-- Gider Modal -->
    <div class="modal" id="gider-modal">
        <div class="modal-content">
            <h3>â– Gider Ekle</h3>
            <input type="number" id="gider-tutar" placeholder="Tutar (â‚º)" inputmode="decimal">
            <div class="kategori-grid" id="gider-kategoriler">
                <button class="kat-btn" data-kat="market">ğŸ›’ Market</button>
                <button class="kat-btn" data-kat="yemek">ğŸ” Yemek</button>
                <button class="kat-btn" data-kat="fatura">ğŸ“„ Fatura</button>
                <button class="kat-btn" data-kat="yakit">â›½ YakÄ±t</button>
                <button class="kat-btn" data-kat="ulasim">ğŸšŒ UlaÅŸÄ±m</button>
                <button class="kat-btn" data-kat="saglik">ğŸ’Š SaÄŸlÄ±k</button>
                <button class="kat-btn" data-kat="giyim">ğŸ‘• Giyim</button>
                <button class="kat-btn" data-kat="eglence">ğŸ® EÄŸlence</button>
                <button class="kat-btn" data-kat="kira">ğŸ  Kira</button>
                <button class="kat-btn" data-kat="diger_gider">ğŸ’¸ DiÄŸer</button>
            </div>
            <input type="text" id="gider-aciklama" placeholder="AÃ§Ä±klama (opsiyonel)">
            <div class="modal-buttons">
                <button class="btn cancel" onclick="closeModal('gider-modal')">Ä°ptal</button>
                <button class="btn confirm" onclick="giderEkle()">Ekle</button>
            </div>
        </div>
    </div>

    <!-- BaÅŸlangÄ±Ã§ Bakiye Modal -->
    <div class="modal" id="bakiye-modal">
        <div class="modal-content">
            <h3>ğŸ’° BaÅŸlangÄ±Ã§ Bakiyesi</h3>
            <p class="modal-desc">Mevcut cÃ¼zdan bakiyenizi girin</p>
            <input type="number" id="baslangic-tutar" placeholder="Mevcut bakiye (â‚º)" inputmode="decimal">
            <div class="modal-buttons">
                <button class="btn cancel" onclick="closeModal('bakiye-modal')">Ä°ptal</button>
                <button class="btn confirm" onclick="baslangicBakiyeAyarla()">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Ä°ÅŸlem Silme Onay Modal -->
    <div class="modal" id="sil-modal">
        <div class="modal-content">
            <h3>ğŸ—‘ï¸ Ä°ÅŸlemi Sil</h3>
            <p class="modal-desc" id="sil-detay">Bu iÅŸlemi silmek istediÄŸinize emin misiniz?</p>
            <div class="modal-buttons">
                <button class="btn cancel" onclick="closeModal('sil-modal')">Ä°ptal</button>
                <button class="btn confirm danger" onclick="islemSilOnayla()">Sil</button>
            </div>
        </div>
    </div>

    <!-- Not Ekle Modal -->
    <div class="modal" id="not-ekle-modal">
        <div class="modal-content">
            <h3>ğŸ“ Yeni Not</h3>
            <textarea id="not-icerik" placeholder="Notunuzu yazÄ±n..." rows="4"></textarea>
            <div class="hatirlatma-section">
                <label class="checkbox-label">
                    <input type="checkbox" id="hatirlatma-aktif" onchange="toggleHatirlatma()">
                    <span>â° HatÄ±rlatma ekle</span>
                </label>
                <input type="datetime-local" id="hatirlatma-zaman" style="display: none;">
            </div>
            <div class="modal-buttons">
                <button class="btn cancel" onclick="closeModal('not-ekle-modal')">Ä°ptal</button>
                <button class="btn confirm" onclick="notEkle()">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Not Silme Modal -->
    <div class="modal" id="not-sil-modal">
        <div class="modal-content">
            <h3>ğŸ—‘ï¸ Notu Sil</h3>
            <p class="modal-desc" id="not-sil-detay">Bu notu silmek istediÄŸinize emin misiniz?</p>
            <div class="modal-buttons">
                <button class="btn cancel" onclick="closeModal('not-sil-modal')">Ä°ptal</button>
                <button class="btn confirm danger" onclick="notSilOnayla()">Sil</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
